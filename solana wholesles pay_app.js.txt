// Add event listener to the form submit button
document.addEventListener('DOMContentLoaded', function() {
  const form = document.getElementById('paymentForm');
  
  form.addEventListener('submit', async function(e) {
    e.preventDefault(); // Prevent default form submission
    
    // Get form values
    const supplierName = document.getElementById('supplierName').value;
    const amount = document.getElementById('amount').value;
    const walletAddress = document.getElementById('walletAddress').value;
    
    // Prepare payment data
    const paymentData = {
      supplierName,
      amount: parseFloat(amount),
      walletAddress
    };
    
    try {
      // Send request to backend API
      const response = await fetch('/api/payment', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(paymentData)
      });
      
      const result = await response.json();
      
      if (result.success) {
        // Display success message
        alert('Payment Link Generated!');
        
        // In a real implementation, we would display the QR code here
        // For now we just show an alert
        console.log('Payment created with TX ID:', result.txid);
      } else {
        alert('Error generating payment link');
      }
    } catch (error) {
      console.error('Error:', error);
      alert('An error occurred while processing your request');
    }
  });
});